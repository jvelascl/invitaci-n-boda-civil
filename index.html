<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n ‚Äì David & Selena</title>
  <meta name="description" content="Invitaci√≥n interactiva con audio y enlaces" />

  <!-- Fuentes: n√∫meros alargados + etiquetas manuscritas -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Oswald:wght@500&display=swap" rel="stylesheet">

  <style>
    :root{ 
      --max-width: 840px;
      --vino:#5a0a16;   /* granate oscuro para contador */
      --negro:#1a1a1a;  /* etiquetas */
      --cafe:#6b4e2e;   /* marr√≥n caf√© para la mano */
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:#0b0b0b;color:#111;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

    .stage{position:relative;width:min(100vw,var(--max-width));margin:16px auto;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);background:#000}
    .bg{display:block;width:100%;height:auto}

    /* Hotspots (ya existentes) */
    .hotspot{position:absolute;display:inline-block}
    .hotspot a{display:block;width:100%;height:100%;text-indent:-9999px;overflow:hidden}
    #hs-music { left:70%; top:13.4%; width:7.1%; height:1%; }
    #hs-cal   { left:13.9%; top:33.4%; width:28%;  height:1.1%; }
    #hs-map   { left:53%;   top:38.7%; width:25%;  height:1%; }
    #hs-form  { left:57%;   top:47.7%; width:25%;  height:1.1%; }

    /* Controles m√∫sica (ocultos visualmente salvo que actives .controls) */
    .controls{position:absolute;left:50%;top:10%;transform:translateX(-50%);display:none;gap:8px;align-items:center;background:rgba(255,255,255,.92);border-radius:999px;padding:10px 14px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .btn{border:0;border-radius:999px;padding:8px 12px;cursor:pointer;background:#fff;font-weight:600}
    .btn:focus{outline:3px solid #4c9ffe;outline-offset:2px}

    /* === Contador (Meses : D√≠as : Horas) === */
    .cd-wrap{
      position:absolute; left:0; width:100%;
      top: calc(95% + 32px);  /* ubicaci√≥n bajo ‚ÄúFalta:‚Äù */
      text-align:center;
    }
    .countdown{
      display:flex; justify-content:center; align-items:baseline; gap:1rem;
      font-variant-numeric:tabular-nums;
    }
    .cd-num{
      font-family: 'Oswald', sans-serif;
      font-size:2.3rem; font-weight:500; color:var(--vino);
      line-height:1; letter-spacing:.02em; min-width:2ch; text-align:center;
    }
    .cd-label{
      display:block; font-size:1.35rem; color:var(--negro); opacity:.95; margin-top:.18rem;
      font-family: 'Dancing Script', cursive;
    }
    .cd-sep{
      font-size:2.3rem; font-weight:500; line-height:1; color:var(--vino);
      font-family: 'Oswald', sans-serif; transform: translateY(2px);
      min-width:1ch; text-align:center;
    }
    @media (max-width: 420px){
      .countdown{gap:.8rem}
      .cd-num{font-size:2rem}
      .cd-sep{font-size:2rem}
      .cd-label{font-size:1.2rem}
    }

    /* === Manos animadas (una por hotspot) === */
    .hint{
      position:absolute; z-index:5; pointer-events:none;
      user-select:none; transition:opacity .35s ease; opacity:.97;
      font-size:1.8rem; line-height:1; color:var(--cafe);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,.35));
      transform-origin: center;
      animation: hint-bounce 1.2s infinite;
    }
    .hint.hidden{ opacity:0; }
    @keyframes hint-bounce{
      0%,100%{ transform: rotate(-35deg) translateY(0); }
      50%    { transform: rotate(-35deg) translateY(-4px); }
    }
    @media (prefers-reduced-motion: reduce){
      .hint{ animation:none }
    }
  </style>
</head>
<body>
  <main class="stage" aria-label="Invitaci√≥n interactiva">
    <!-- Fondo -->
    <img class="bg" src="assets/Boda.jpg" alt="Invitaci√≥n David y Selena" id="bg"/>

    <!-- Audio (oculto) -->
    <video id="media" preload="metadata" playsinline style="position:absolute;left:-9999px;width:1px;height:1px;opacity:0;" aria-hidden="true">
      <source src="assets/musica.mp4" type="video/mp4"/>
      Tu navegador no soporta v√≠deo HTML5.
    </video>

    <!-- (Opcional) Controles visibles -->
    <div class="controls" id="controls">
      <button class="btn" id="play">‚ñ∂Ô∏é Reproducir</button>
      <button class="btn" id="mute">üîä</button>
    </div>

    <!-- Hotspots -->
    <div id="hs-music" class="hotspot"><a href="#" onclick="toggleMusic(); return false;" aria-label="Reproducir/Pausar m√∫sica">Reproducir m√∫sica</a></div>
    <div id="hs-cal" class="hotspot"><a href="https://calendar.app.google/L6ciMkGSfXdSb6ju7" target="_blank" rel="noopener">Agenda la fecha</a></div>
    <div id="hs-map" class="hotspot"><a href="https://maps.app.goo.gl/P5i7W7WSzFhvjFDs9" target="_blank" rel="noopener">Ver mapa</a></div>
    <div id="hs-form" class="hotspot"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdmN66lbqBq6saBTdLBhs7DRX55u6N_YkGAtVkXV1Ysww89ZQ/viewform?usp=header" target="_blank" rel="noopener">Confirmar asistencia</a></div>

    <!-- Contador -->
    <div class="cd-wrap" aria-live="polite">
      <div class="countdown" id="countdown">
        <div>
          <span class="cd-num" id="cd-months">00</span>
          <span class="cd-label">Meses</span>
        </div>
        <span class="cd-sep" aria-hidden="true">:</span>
        <div>
          <span class="cd-num" id="cd-days">00</span>
          <span class="cd-label">D√≠as</span>
        </div>
        <span class="cd-sep" aria-hidden="true">:</span>
        <div>
          <span class="cd-num" id="cd-hours">00</span>
          <span class="cd-label">Horas</span>
        </div>
      </div>
    </div>

    <!-- Manos animadas: Play / Agenda / Mapa / Confirmar -->
    <div class="hint" id="hint-music" aria-hidden="true">üëâ</div>
    <div class="hint" id="hint-cal" aria-hidden="true">üëâ</div>
    <div class="hint" id="hint-map" aria-hidden="true">üëâ</div>
    <div class="hint" id="hint-form" aria-hidden="true">üëâ</div>
  </main>

  <script>
    /* M√∫sica */
    const media = document.getElementById('media');
    function toggleMusic(){
      if(media.paused){ media.play().catch(()=>{}); }
      else{ media.pause(); }
    }
    // (Opcional) Si activas los botones visibles, descomenta abajo
    // const playBtn = document.getElementById('play'); const muteBtn = document.getElementById('mute');
    // if(playBtn && muteBtn){
    //   playBtn.addEventListener('click', async () => {
    //     if (media.paused){ await media.play(); playBtn.textContent='‚è∏Ô∏é Pausar'; }
    //     else{ media.pause(); playBtn.textContent='‚ñ∂Ô∏é Reproducir'; }
    //   });
    //   muteBtn.addEventListener('click', () => { media.muted = !media.muted; muteBtn.textContent = media.muted ? 'üîá' : 'üîä'; });
    // }

    /* Contador */
    (function(){
      const target = new Date('2025-11-29T17:00:00+01:00');  // Madrid CET en noviembre
      const elM = document.getElementById('cd-months');
      const elD = document.getElementById('cd-days');
      const elH = document.getElementById('cd-hours');

      function addMonths(d, m){ const x=new Date(d); x.setDate(1); x.setMonth(x.getMonth()+m); const ld=new Date(x.getFullYear(),x.getMonth()+1,0).getDate(); x.setDate(Math.min(d.getDate(),ld)); return x; }
      function diffParts(now, tgt){
        if (now >= tgt) return {months:0, days:0, hours:0};
        let months = (tgt.getFullYear()-now.getFullYear())*12 + (tgt.getMonth()-now.getMonth());
        let afterMonths = addMonths(now, months);
        if (afterMonths > tgt){ months--; afterMonths = addMonths(now, months); }
        let ms = tgt - afterMonths;
        const dayMs = 24*60*60*1000, hourMs=60*60*1000;
        const days = Math.floor(ms/dayMs); ms -= days*dayMs;
        const hours = Math.floor(ms/hourMs);
        return {months, days, hours};
      }
      function render(){
        const {months, days, hours} = diffParts(new Date(), target);
        elM.textContent = String(months).padStart(2,'0');
        elD.textContent = String(days).padStart(2,'0');
        elH.textContent = String(hours).padStart(2,'0');
      }
      render();
      setInterval(render, 60000);
    })();

    /* Colocaci√≥n de manos (ajuste fino por hotspot) */
    (function(){
      const stage = document.querySelector('.stage');

      // Offsets individuales (px) para dejar la mano DEBAJO-IZQ del centro y que apunte al bot√≥n
      // Ajustados a tu layout: puedes cambiar aqu√≠ si quieres mover alguna milim√©tricamente.
      const handOffsets = {
        'hint-music': { hs:'#hs-music', dx:-55, dy: 28, rot:-35 }, // Play (arriba derecha del dise√±o)
        'hint-cal'  : { hs:'#hs-cal',   dx:-65, dy: 30, rot:-30 }, // Agenda (zona izquierda, texto ancho)
        'hint-map'  : { hs:'#hs-map',   dx:-60, dy: 26, rot:-35 }, // Ver mapa (centro-dcha)
        'hint-form' : { hs:'#hs-form',  dx:-60, dy: 28, rot:-35 }  // Confirmar (mitad inferior)
      };

      function placeOne(hintId){
        const cfg = handOffsets[hintId];
        const hint = document.getElementById(hintId);
        const hs   = document.querySelector(cfg?.hs || '');
        if(!hint || !hs || !stage) return;

        const stageRect = stage.getBoundingClientRect();
        const r = hs.getBoundingClientRect();
        const cx = r.left + r.width/2;
        const cy = r.top + r.height/2;

        const left = cx + (cfg.dx||0) - stageRect.left;
        const top  = cy + (cfg.dy||0) - stageRect.top;

        hint.style.left = `${left}px`;
        hint.style.top  = `${top}px`;
        hint.style.transform = `rotate(${cfg.rot||-35}deg)`;
      }

      function placeAll(){
        Object.keys(handOffsets).forEach(placeOne);
      }

      window.addEventListener('load', placeAll);
      window.addEventListener('resize', placeAll);
      setTimeout(placeAll,300);
      setTimeout(placeAll,1000);

      // Ocultar manos cuando el usuario interact√∫e con cada hotspot
      const map = {
        'hint-music':'#hs-music a',
        'hint-cal':'#hs-cal a',
        'hint-map':'#hs-map a',
        'hint-form':'#hs-form a'
      };
      for (const [hintId, sel] of Object.entries(map)){
        const hint = document.getElementById(hintId);
        const a = document.querySelector(sel);
        if (a && hint){
          const hide = ()=> hint.classList.add('hidden');
          a.addEventListener('click', hide, {once:true});
          a.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' ') hide(); }, {once:true});
        }
      }
      // Si se reproduce m√∫sica, ocultar mano del play
      if (media){
        const hm = document.getElementById('hint-music');
        media.addEventListener('play', ()=> hm && hm.classList.add('hidden'), {once:true});
      }
    })();
  </script>
</body>
</html>

