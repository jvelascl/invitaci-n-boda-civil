<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n ‚Äì David & Selena</title>
  <meta name="description" content="Invitaci√≥n interactiva con audio y enlaces" />
  <style>
    :root{ 
      --max-width: 840px;

      /* Colores del contador, ajustados al estilo crema/marr√≥n de la invitaci√≥n */
      --cd-bg: #f3e8d2;   /* fondo crema */
      --cd-txt: #6b4e2e;  /* n√∫meros */
      --cd-muted: #8a6a44;/* etiquetas */
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:#0b0b0b;color:#111;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

    /* Lienzo vertical responsive (recuadro largo) */
    .stage{position:relative;width:min(100vw,var(--max-width));margin:16px auto;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);background:#000}
    .bg{display:block;width:100%;height:auto}

    /* Capa de hotspots encima del arte */
    .hotspot{position:absolute;display:inline-block}
    .hotspot a{display:block;width:100%;height:100%;text-indent:-9999px;overflow:hidden}

    /* Controles opcionales (por si quieres mantener botones visibles adem√°s del hotspot de m√∫sica) */
    .controls{position:absolute;left:50%;top:10%;transform:translateX(-50%);display:flex;gap:8px;align-items:center;background:rgba(255,255,255,.92);border-radius:999px;padding:10px 14px;box-shadow:0 8px 24px rgba(0,0,0,.25);display:none}
    .btn{border:0;border-radius:999px;padding:8px 12px;cursor:pointer;background:#fff;font-weight:600}
    .btn:focus{outline:3px solid #4c9ffe;outline-offset:2px}

    /* === Hotspots calculados a partir de Boda.jpg (288x2048) === */
    /* M√∫sica (icono ‚ñ∂) */
    #hs-music { left:70%; top:13.4%; width:7.1%; height:1%; }
    /* Agenda la fecha */
    #hs-cal   { left:13.9%; top:33.4%; width:28%; height:1.1%; }
    /* Ver mapa */
    #hs-map   { left:53%;   top:38.7%;   width:25%; height:1%; }
    /* Confirmar asistencia */
    #hs-form  { left:57%;   top:47.7%; width:25%; height:1.1%; }

    /* === Cuenta regresiva (meses, d√≠as, horas) === */
    #countdown{position:absolute; left:30%; top:95.2%; width:40%; text-align:center;}
    #countdown .cd-wrap{display:flex; justify-content:space-between; align-items:center; gap:8px; background:var(--cd-bg); padding:8px 10px; border-radius:14px; box-shadow:0 6px 16px rgba(0,0,0,.12)}
    #countdown .box{flex:1; border-radius:10px; padding:6px 4px}
    #countdown .num{display:block; font-weight:800; color:var(--cd-txt); font-size:clamp(16px, 4.2vw, 26px); line-height:1}
    #countdown .lbl{display:block; color:var(--cd-muted); font-weight:600; font-size:clamp(11px, 3.0vw, 13px); letter-spacing:.02em}
  </style>
</head>
<body>
  <main class="stage" aria-label="Invitaci√≥n interactiva">
    <!-- Fondo: usa el JPG exacto que compartiste -->
    <img class="bg" src="assets/Boda.jpg" alt="Invitaci√≥n David y Selena" id="bg"/>

    <!-- V√≠deo MP4 (solo para audio). Lo mantenemos oculto visualmente pero presente en el DOM. -->
    <!-- playsinline evita pantalla completa en m√≥vil; sin controles nativos para que no tape nada. -->
    <video id="media" preload="metadata" playsinline style="position:absolute;left:-9999px;width:1px;height:1px;opacity:0;" aria-hidden="true">
      <source src="assets/musica.mp4" type="video/mp4"/>
      Tu navegador no soporta v√≠deo HTML5.
    </video>

    <!-- Controles opcionales visibles (puedes activar display:flex en .controls si los quieres adem√°s del hotspot) -->
    <div class="controls" id="controls">
      <button class="btn" id="play">‚ñ∂Ô∏é Reproducir</button>
      <button class="btn" id="mute">üîä</button>
    </div>

    <!-- Hotspots -->
    <div id="hs-music" class="hotspot"><a href="#" onclick="toggleMusic(); return false;" aria-label="Reproducir/Pausar m√∫sica">Reproducir m√∫sica</a></div>
    <div id="hs-cal" class="hotspot"><a href="https://calendar.app.google/L6ciMkGSfXdSb6ju7" target="_blank" rel="noopener">Agenda la fecha</a></div>
    <div id="hs-map" class="hotspot"><a href="https://maps.app.goo.gl/P5i7W7WSzFhvjFDs9" target="_blank" rel="noopener">Ver mapa</a></div>
    <div id="hs-form" class="hotspot"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdmN66lbqBq6saBTdLBhs7DRX55u6N_YkGAtVkXV1Ysww89ZQ/viewform?usp=header" target="_blank" rel="noopener">Confirmar asistencia</a></div>

    <!-- Cuenta regresiva -->
    <div id="countdown" aria-label="Cuenta regresiva">
      <div class="cd-wrap">
        <div class="box"><span id="cd-months" class="num">0</span><span class="lbl">meses</span></div>
        <div class="box"><span id="cd-days" class="num">0</span><span class="lbl">d√≠as</span></div>
        <div class="box"><span id="cd-hours" class="num">0</span><span class="lbl">horas</span></div>
      </div>
    </div>
  </main>

  <script>
    const media = document.getElementById('media');
    const playBtn = document.getElementById('play');
    const muteBtn = document.getElementById('mute');

    function ensureUnmutedOnFirstPlay(){
      // Algunos m√≥viles solo permiten reproducir con sonido tras interacci√≥n.
      // Este toggle se llama desde el click del usuario, as√≠ que podemos quitar mute si hiciera falta.
      if (media.muted) media.muted = false;
    }

    function toggleMusic(){
      ensureUnmutedOnFirstPlay();
      if(media.paused){ media.play().catch(e=>console.warn('No se pudo reproducir:', e)); }
      else{ media.pause(); }
    }

    // Si decides mostrar los botones visibles (cambia display:none a display:flex en .controls):
    if(playBtn && muteBtn){
      playBtn?.addEventListener('click', async () => {
        try{
          ensureUnmutedOnFirstPlay();
          if (media.paused){ await media.play(); playBtn.textContent='‚è∏Ô∏é Pausar'; }
          else{ media.pause(); playBtn.textContent='‚ñ∂Ô∏é Reproducir'; }
        }catch(e){ console.warn('No se pudo reproducir:', e); }
      });
      muteBtn?.addEventListener('click', () => {
        media.muted = !media.muted;
        muteBtn.textContent = media.muted ? 'üîá' : 'üîä';
      });
    }

 // ====== Cuenta regresiva (meses, d√≠as y horas) ======
    // Fecha/hora del evento en Madrid (CET/CEST). Ajusta si cambia.
    const TARGET = new Date('2025-11-29T17:00:00+01:00');

    const moEl = document.getElementById('cd-months');
    const dEl  = document.getElementById('cd-days');
    const hEl  = document.getElementById('cd-hours');

    function monthsDiff(from, to){
      let months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth());
      // ancla: from + months
      let anchor = new Date(from.getFullYear(), from.getMonth() + months, from.getDate(), from.getHours(), from.getMinutes(), from.getSeconds());
      // si nos pasamos del target, retrocede un mes
      while (anchor > to) {
        months--;
        anchor = new Date(from.getFullYear(), from.getMonth() + months, from.getDate(), from.getHours(), from.getMinutes(), from.getSeconds());
      }
      return { months, anchor };
    }

    function updateCountdown(){
      const now = new Date();
      if (TARGET <= now){
        moEl.textContent = '0';
        dEl.textContent  = '0';
        hEl.textContent  = '0';
        return;
      }
      const md = monthsDiff(now, TARGET);
      const afterMonths = md.anchor;
      let msLeft = TARGET - afterMonths;
      const dayMs = 24*60*60*1000;
      const hourMs = 60*60*1000;

      const days = Math.floor(msLeft / dayMs); msLeft -= days * dayMs;
      const hours = Math.floor(msLeft / hourMs);

      moEl.textContent = String(md.months);
      dEl.textContent  = String(days);
      hEl.textContent  = String(hours).padStart(2,'0');

      // Pluralizaci√≥n simple (opcional)
      document.querySelector('#cd-months + .lbl').textContent = (md.months === 1 ? 'mes' : 'meses');
      document.querySelector('#cd-days + .lbl').textContent   = (days === 1 ? 'd√≠a' : 'd√≠as');
      document.querySelector('#cd-hours + .lbl').textContent  = (hours === 1 ? 'hora' : 'horas');
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>

